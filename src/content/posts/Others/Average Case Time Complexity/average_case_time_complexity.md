---
title: Average Case Time Complexity
published: 2025-10-04
description: '平均时间复杂度分析计算'
image: "./average_case_time_complexity.png"
tags: ['Others']
category: 'Others'
draft: false
---

> 封面来源: [次元小镇](https://dimtown.com/84456.html)
> 画师：日本插画师Uom

## 平均时间复杂度的定义

平均情况时间复杂度 = 所有`可能输入的时间复杂度`的**期望值**

- 期望值：在概率论和统计学中，期望值（或数学期望、或均值，亦简称期望，物理学中称为期待值）是指在一个离散性随机变量试验中`每次可能结果的概率乘以其结果的总和`。(来自：[百度百科-期望值](https://baike.baidu.com/item/%E6%9C%9F%E6%9C%9B%E5%80%BC/8664642))

## 平均时间复杂度计算

### 基本公式

平均时间复杂度的数学期望为：

$$E(T) = \sum_{i=1}^{n} P(i) \cdot T(i)$$

#### 变量说明

- $E(T)$：期望运行时间复杂度
- $P(i)$：第 $i$ 种输入情况的概率
- $T(i)$：第 $i$ 种输入情况的执行时间
- $n$：所有可能的输入情况总数

## 线性查找实例

对于线性查找算法：

以查找不含重复元素的`vector<int> a`中的某个元素为例，如果找到了，则返回对应元素的索引

```cpp
int Find_(int p)
{
    for(int i = 0; i < a.size(); i++)
    {
        if(a[i] == p){
            return i;
        }
    }
}
```

假设数组中有`n`个元素，需要查找的元素出现在数组每个位置的几率相等且和不出现在数组中的概率相等

那么有：

- 元素出现在第一个位置的概率为 $1 / (n + 1)$
- 元素出现在第二个位置的概率为 $1 / (n + 1)$
- ……
- 元素出现在第n个位置的概率为 $1 / (n + 1)$
- 元素没有在数组中的概率为 $1 / (n + 1)$

$$E(T)$$

$$= 1 \cdot 1 / (n + 1) + 2 \cdot  1 / (n + 1) + …… + n \cdot  1 / (n + 1) + n \cdot  1 / (n + 1)$$

$$= \sum_{i=1}^{n} \frac{i}{n+1} + \frac{n}{n+1}$$

$$= \frac{n(n + 3)}{2(n + 1)}$$

实际计算时可忽略常数，只看数量级

从结果来看，$E(T)$等同于$O(n)$
